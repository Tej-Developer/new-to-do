<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TaskForge - Contact Us</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/contact.css">
    <style>
      
      
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <header class="header">
        <nav class="nav max-width">
          <h1 class="logo">Task<span>Forge</span></h1>
          <div class="nav-buttons">
            <button
              class="button blue-bg"
              onclick="window.location.href='dashboard.html'"
            >
              Dashboard
            </button>
            <button
              class="button white-bg"
              onclick="window.location.href='index.html'"
            >
              Home
            </button>
          </div>
        </nav>
      </header>

      <!-- Main Content -->
      <main class="main">
        <div class="max-width">
          <div class="contact-container">
            <div class="contact-header">
              <h2 class="contact-title">Get in Touch</h2>
              <p class="contact-subtitle">
                We'd love to hear from you! Send us a message.
              </p>
            </div>

            <div class="success-message" id="success-message">
              <p>✓ Message sent successfully! We'll get back to you soon.</p>
            </div>

            <form id="contact-form">
              <div class="form-group">
                <label for="name" class="label">Name</label>
                <input
                  type="text"
                  id="name"
                  class="input"
                  placeholder="Your full name"
                  required
                />
                <p class="error-text" id="name-error">Please enter your name</p>
              </div>

              <div class="form-group">
                <label for="email" class="label">Email</label>
                <input
                  type="email"
                  id="email"
                  class="input"
                  placeholder="your.email@example.com"
                  required
                />
                <p class="error-text" id="email-error">
                  Please enter a valid email
                </p>
              </div>

              <div class="form-group">
                <label for="message" class="label">Message</label>
                <textarea
                  id="message"
                  class="textarea"
                  placeholder="Write your message here..."
                  required
                ></textarea>
                <p class="error-text" id="message-error">
                  Message must be at least 10 characters
                </p>
              </div>

              <button type="submit" class="button submit-btn pink-bg">
                Send Message
              </button>
            </form>
          </div>
        </div>
      </main>

      <!-- Footer -->
      <footer class="footer">
        <div class="max-width">
          <p class="footer-text">
            © 2025 TaskForge. Built with focus and dedication.
          </p>
        </div>
      </footer>
    </div>

    <!-- <script src="../js/contact.js"></script> -->
     <script>
  // Get references to form and input elements
  const form = document.getElementById("contact-form");
  const nameInput = document.getElementById("name");
  const emailInput = document.getElementById("email");
  const messageInput = document.getElementById("message");
  const successMessage = document.getElementById("success-message");

  // ✅ Pre-fill name and email if user is logged in (from sessionStorage)
  window.addEventListener("DOMContentLoaded", () => {
    const user = JSON.parse(
      sessionStorage.getItem("taskforge_current_user") || "null"
    );
    if (user) {
      nameInput.value = user.name;
      emailInput.value = user.email;
    }
  });

  // ✅ Clear validation errors when user types in inputs
  [nameInput, emailInput, messageInput].forEach((input) => {
    input.addEventListener("input", () => {
      input.classList.remove("error"); // remove error border
      document.getElementById(`${input.id}-error`).classList.remove("show"); // hide error message
    });
  });

  // ✅ Handle form submission
  form.addEventListener("submit", (e) => {
    e.preventDefault(); // prevent default form submission behavior

    // Clear previous error states and messages
    document.querySelectorAll(".error").forEach((el) => el.classList.remove("error"));
    document.querySelectorAll(".error-text").forEach((el) => el.classList.remove("show"));
    successMessage.classList.remove("show");

    // Get trimmed values from the inputs
    const name = nameInput.value.trim();
    const email = emailInput.value.trim();
    const message = messageInput.value.trim();

    let isValid = true;

    // ✅ Validate Name: at least 2 characters
    if (name.length < 2) {
      nameInput.classList.add("error");
      document.getElementById("name-error").classList.add("show");
      isValid = false;
    }

    // ✅ Validate Email using regex
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(email)) {
      emailInput.classList.add("error");
      document.getElementById("email-error").classList.add("show");
      isValid = false;
    }

    // ✅ Validate Message: at least 10 characters
    if (message.length < 10) {
      messageInput.classList.add("error");
      document.getElementById("message-error").classList.add("show");
      isValid = false;
    }

    // ❌ If any field is invalid, stop submission
    if (!isValid) return;

    // ✅ If valid, store the message in sessionStorage
    const contacts = JSON.parse(
      sessionStorage.getItem("taskforge_contacts") || "[]"
    );

    contacts.push({
      id: Date.now(),              // unique ID for message
      name,
      email,
      message,
      submittedAt: new Date().toISOString(), // timestamp
    });

    // ✅ Save updated contact list to sessionStorage
    sessionStorage.setItem("taskforge_contacts", JSON.stringify(contacts));

    // ✅ Show success message and reset the form
    successMessage.classList.add("show");
    form.reset();
  });
</script>

  </body>
</html>
